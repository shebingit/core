{% extends 'TLindex.html'%}

{% load static %}
{% load custom_filters %}
{% block content %}
<style>
    .ml-2
    {
        margin-left: 0.60rem;
    }
</style>

<div class="row">
    <div class="card">
        <div class="card-body">
            <h5 class="card-title  text-secondary pb-2">Developers Task Delay Report</h5>

            <form action="{% url 'Tl_developer_report' %}" method="post">
                {% csrf_token %}
                <div class="row">
                    <div class="col-12 col-md-5 col-lg-5">
                        <div class="form-group">
                            <label class="form-lable text-sm text-muted">Developers</label>
                            <select class="form-control text-muted" name="developer_ID">
                                {% for developer in man %}
                                <option class="text-sm "  value="{{developer.id}}">{{developer.fullname}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="col-6 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-lable text-sm text-muted">Task From </label>
                            <input type="date" name="from_date" class="form-control text-muted text-xm">
                        </div>
                    </div>
                    <div class="col-6 col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-lable text-sm text-muted">Task To </label>
                            <input type="date" name="to_date" class="form-control text-xm text-muted">
                        </div>
                    </div>
                    <div class="col-12 col-md-1 col-lg-1 d-flex align-items-center justify-content-center">
                        <div class="button-group ">
                            <button type="submit" class="btn btn-outline-primary"><span class="mdi mdi-magnify"></span></button>
                        </div>
                    </div>
                </div>
               
            </form>
            
            <hr>

            <div class="d-flex justify-content-between">
                <p class="text-sm text-secondary ">
                    <span class="mdi mdi-check-circle text-success"></span> On Task - 
                    <span class="ml-2"> 3 </span>  
                </p>
                <p class="text-sm text-secondary ">
                    <span class="mdi mdi-clock-alert text-danger"></span> Delayed - 
                    <span class="ml-2"> 3 </span>  
                </p>
            </div>
            <div class="progress progress-lg mb-3 bg-danger">
                <div class="progress-bar bg-success" role="progressbar" style="width: 27%" aria-valuenow="27" aria-valuemin="0" aria-valuemax="100"></div>
            </div>

            <div class="table-responsive mt-5">
                <table class="table ">
                    <thead>
                      <tr>
                        <th>  Developer </th>
                        <th> Project | Task | SubTask </th>
                        <th> Start Date | End Date </th>
                        <th> Progress </th>
                        <th> Delay ( In Days ) </th>
                        <th> Status  </th>
                      </tr>
                    </thead>
                    <tbody>
                        {% for task in tasks_objs %}
                        <tr>
                            <td class="py-1">
                                {% if task.developer.photo %}
                                <img src="{{task.developer.photo.url}}" alt="image" class="lazyload">
                                
                                {% else %}
                                <span class="mdi mdi-account"></span>
                                {% endif %}
                                <span class="ml-2"> {{task.developer.fullname}}- {{task.id}}</span>
                            
                            </td>
                            <td> 
                                <p>{{task.project.project}}</p> 
                                <p>{{task.task}}</p>
                                <p>Sub Task - {{task.subtask|default:"No data"|tostr|split_into_paragraphs:60|safe }}</p>
                            </td>
                            <td>
                                <span >{{task.startdate}}  </span>  | <span class="ml-2">{{task.enddate}}</span>
                            </td>
                            <td>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width:{{task.progress}}%" aria-valuenow="{{task.progress}}" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            </td>
                            <td> 
                                <button class="btn btn-outline-danger">0</button>
                            </td>
                            <td> {{task.status}} </td>
                        </tr>
                        {% endfor %}
                     
                    </tbody>
                  </table>
            </div>
                
            </div>
        </div>
    </div>
</div>

<script src="path/to/lazysizes.min.js" defer></script>

{% endblock %}